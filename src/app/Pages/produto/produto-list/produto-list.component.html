<div class="container">
  <h1 class="title">LISTAGEM DE PRODUTOS</h1>
  <div class="header">
    <button (click)="showFormDialog()" class="new-product-button" icon="pi pi-plus" label="Novo Produto" pButton
            type="button"></button>
  </div>

  <div class="card-container">
    <p-card *ngFor="let produto of produtos" class="product-card">
      <ng-template pTemplate="header">
        <div class="card-header">
          <h2>{{ produto.nome }}</h2>
        </div>
      </ng-template>
      <ng-template pTemplate="content">
        <div class="card-content">
          <p>Marca: {{ produto.marca }}</p>
          <p>Validade: {{ produto.validade | date : 'dd/MM/yyyy' }}</p>
          <p>Peso: {{ produto.peso }} {{ produto.unidadeDeMedida }}</p>
          <p>Categoria: {{ produto.categoria }}</p>
        </div>
      </ng-template>
      <ng-template pTemplate="footer">
        <div class="card-footer">
          <button (click)="viewProduct(produto)" aria-label="Detalhes" icon="pi pi-eye" pButton pTooltip="Mais detalhes"
                  tooltipPosition="top"></button>
          <button (click)="editProduct(produto)" aria-label="Editar" icon="pi pi-pencil" pButton pTooltip="Editar"
                  tooltipPosition="top"></button>
          <button (click)="deleteProduct(produto)" aria-label="Excluir" icon="pi pi-trash" pButton pTooltip="Excluir"
                  tooltipPosition="top"></button>
          <button (click)="showQrCodeDialog(produto)" aria-label="Code" pButton pTooltip="Qr Code" icon="pi pi-qrcode" tooltipPosition="top" ></button>
        </div>
      </ng-template>
    </p-card>
  </div>

  <p-paginator (onPageChange)="onPageChange($event)"
               [rowsPerPageOptions]="[12, 36, 48]"
               [rows]="rows"
               [totalRecords]="totalRecords"
  ></p-paginator>
  <p-dialog (onHide)="closeFormDialog()"
            [(visible)]="displayFormDialog"
            [baseZIndex]="10000"
            [closable]="true"
            [modal]="true"
            [resizable]="true"
            [style]="{width: '90vw'}"
            header="{{ isEditMode ? 'Editar Produto' : 'Cadastrar Produto' }}">
    <app-produto-form (cancel)="closeFormDialog()"
                      (save)="onSave($event)"
                      [product]="selectedProduct"
    ></app-produto-form>
  </p-dialog>

  <p-dialog (onHide)="closeDetailsDialog()"
            [(visible)]="displayDetailsDialog"
            [baseZIndex]="10000"
            [closable]="true"
            [modal]="true"
            [resizable]="true"
            [style]="{width: '90vw'}"
            header="Detalhes do Produto">
    <app-produto-details [product]="selectedProduct"></app-produto-details>
  </p-dialog>

  <p-dialog (onHide)="closeQrCodeDialog()"
            [(visible)]="displayQrCodeDialog"
            [baseZIndex]="10000"
            [closable]="true"
            [modal]="true"
            [resizable]="true"
            [style]="{width: '90vw'}"
            header="Qr Code do Produto">

            <div class="qr-button">
            <button (click)="selectLinkProduct()">Link dinamico</button>
            <button (click)="selectInfoProduct()">Infos Produto</button>
            </div>

            <qrcode style="display: flex; justify-content: space-around;"
                    [qrdata]="selectedQrCode"
                    [margin]="2"
                    [width] = "350">
            </qrcode>

  </p-dialog>
</div>
<p-toast></p-toast>
<p-confirmDialog></p-confirmDialog>
